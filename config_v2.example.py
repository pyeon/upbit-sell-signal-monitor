# -*- coding: utf-8 -*-
"""
업비트 매도 신호 모니터링 v2.0 설정 파일
이 파일을 config.py로 복사하여 사용하세요

===========================================
📋 사용 가이드
===========================================

1. 텔레그램 설정 (필수)
2. 타임프레임 설정 (급락 감지 속도 조절)
3. 가격 패턴 임계값 (급락/급등 기준)
4. 거래량 분석 설정
5. 기술적 지표 임계값
6. 신호 단계 기준

"""

# ============================================
# 1. 텔레그램 설정 (필수)
# ============================================
BOT_TOKEN = "YOUR_BOT_TOKEN_HERE"  # 텔레그램 봇 토큰
CHAT_ID = "YOUR_CHAT_ID_HERE"      # 텔레그램 채팅방 ID (매수 시스템과 동일)

# ============================================
# 2. 타임프레임 설정 (급락 감지 속도 조절)
# ============================================

# 🎯 핵심! 급락을 얼마나 빨리 잡고 싶은가?

# 10분봉 데이터 개수 (최근 몇 시간을 볼 것인가?)
MINUTE_10_COUNT = 72  # 72개 = 12시간
# 💡 조정 가이드:
#    - 36개 (6시간): 더 단기 급락에 민감
#    - 72개 (12시간): 균형잡힌 설정 (권장)
#    - 144개 (24시간): 장기 추세 중시

# 60분봉 데이터 개수
MINUTE_60_COUNT = 24  # 24개 = 24시간
# 💡 조정 가이드:
#    - 12개 (12시간): 단기 추세만
#    - 24개 (24시간): 균형 (권장)
#    - 48개 (48시간): 장기 추세 포함

# ============================================
# 3. 가격 패턴 임계값 (급락/급등 기준)
# ============================================

# 🚨 단기 급락 감지 (10분봉 기준) - NEW!
QUICK_DROP_LOOKBACK = 12  # 최근 몇 개 봉을 볼 것인가? (12개 = 2시간)
# 💡 조정 가이드:
#    - 6개 (1시간): 초단기 급락 감지, 알림 많음
#    - 12개 (2시간): 균형잡힌 설정 (권장)
#    - 18개 (3시간): 단기 노이즈 제거

QUICK_DROP_THRESHOLD = 5.0  # 단기 급락 기준 (%)
# 💡 조정 가이드:
#    - 3%: 민감, 작은 급락도 포착 (알림 많음)
#    - 5%: 균형 (권장) - NOM 같은 급락 잡을 수 있음
#    - 8%: 둔감, 큰 급락만 포착 (알림 적음)
# 📊 예시:
#    5% 설정 → 10,000원에서 9,500원 이하로 떨어지면 신호

# 중기 고점 대비 하락 (12시간 기준)
DROP_FROM_HIGH_12H_THRESHOLD = 8.0  # 12시간 고점 대비 하락 (%)
# 💡 조정 가이드:
#    - 5%: 민감
#    - 8%: 균형 (권장)
#    - 12%: 둔감

# 급등 후 하락 전환 감지
SURGE_6H_THRESHOLD = 15.0  # 6시간 급등 기준 (%)
# 💡 이 값 이상 올랐을 때만 "급등 후 급락" 패턴으로 인식

CHANGE_1H_THRESHOLD = -3.0  # 1시간 하락 기준 (%)
# 💡 급등 후 이 값 이하로 떨어지면 "하락 전환" 신호
# 📊 예시: 
#    SURGE_6H = 20%, CHANGE_1H = -5%
#    → "6시간 전 대비 +20% 올랐는데, 최근 1시간 -5% 급락" = 신호!

# 변동성 체크
VOLATILITY_CHECK_CANDLES = 6  # 최근 몇 개 봉의 변동성을 체크? (6개 = 1시간)
VOLATILITY_THRESHOLD = 3.0  # 평균 변동률 기준 (%)
# 💡 조정 가이드:
#    - 2%: 민감, 작은 변동도 감지
#    - 3%: 균형 (권장)
#    - 5%: 큰 변동만 감지

# ============================================
# 4. 거래량 분석 설정
# ============================================

# 거래량 연속 감소 체크
VOLUME_DECLINE_DAYS = 3  # 며칠 연속 감소를 확인? (일봉 기준)
# 💡 조정 가이드:
#    - 2일: 빠른 감지
#    - 3일: 균형 (권장)
#    - 5일: 확실한 추세만 감지

# 가격-거래량 다이버전스
DIVERGENCE_LOOKBACK_DAYS = 3  # 며칠 전과 비교?
DIVERGENCE_PRICE_THRESHOLD = 3.0  # 가격 상승 기준 (%)
DIVERGENCE_VOLUME_THRESHOLD = -10.0  # 거래량 감소 기준 (%)
# 💡 의미:
#    "가격은 3% 이상 올랐는데, 거래량은 10% 이상 감소" = 약세 다이버전스
# 💡 조정 가이드:
#    민감하게: PRICE 2%, VOLUME -5%
#    둔감하게: PRICE 5%, VOLUME -15%

# ============================================
# 5. 호가창 분석
# ============================================

ORDERBOOK_THRESHOLD = 1.5  # 매도/매수 비율 기준
# 💡 조정 가이드:
#    - 1.3: 민감, 약한 매도압력도 감지
#    - 1.5: 균형 (권장)
#    - 2.0: 강한 매도압력만 감지
# 📊 예시:
#    1.5 → 매도 물량이 매수 물량의 1.5배 이상이면 신호

# ============================================
# 6. 기술적 지표 임계값
# ============================================

# RSI (Relative Strength Index)
RSI_OVERBOUGHT = 70  # 과매수 기준
RSI_HIGH = 60        # 고점권 기준
# 💡 조정 가이드:
#    민감하게: 65 / 55 (알림 많음)
#    표준: 70 / 60 (권장)
#    둔감하게: 75 / 65 (확실한 신호만)

# 스토캐스틱
STOCH_OVERBOUGHT = 80  # 과매수 기준
STOCH_HIGH = 70        # 고점권 기준
# 💡 조정 가이드:
#    민감하게: 75 / 65
#    표준: 80 / 70 (권장)
#    둔감하게: 85 / 75

# 볼린저 밴드
BB_HIGH_THRESHOLD = 80  # 상단 근접 기준 (%)
# 💡 의미: 
#    볼린저 밴드 위치를 0-100%로 환산했을 때 몇 % 이상이면 "상단 근접"?
# 💡 조정 가이드:
#    - 70%: 민감
#    - 80%: 균형 (권장)
#    - 90%: 둔감

# ============================================
# 7. 신호 단계 기준 (10개 지표 중 몇 개?)
# ============================================

SELL_STAGE_REVIEW = 3      # 🟡 매도검토: 3개 이상
SELL_STAGE_PREPARE = 5     # 🟠 매도준비: 5개 이상
SELL_STAGE_IMMEDIATE = 7   # 🔴 즉시매도: 7개 이상

# 💡 조정 가이드:
#
# 📊 보수적 설정 (확실한 신호만):
#    REVIEW = 4, PREPARE = 6, IMMEDIATE = 8
#    → 알림 적음, 정확도 높음
#
# ⚡ 공격적 설정 (작은 신호도 포착):
#    REVIEW = 2, PREPARE = 4, IMMEDIATE = 6
#    → 알림 많음, 민감함
#
# ⚖️ 균형 설정 (권장):
#    REVIEW = 3, PREPARE = 5, IMMEDIATE = 7
#    → 적절한 균형

# ============================================
# 8. 필터링 설정 (최소 변동 기준)
# ============================================

MIN_QUICK_DROP = 3.0  # 단기 최소 급락률 (%)
MIN_DROP_12H = 5.0    # 12시간 최소 하락률 (%)

# 💡 의미:
#    이 값 이상 하락한 코인만 정밀 분석
#    → API 호출 절약, 속도 향상
#
# 💡 조정 가이드:
#    - 민감: 2% / 3%
#    - 균형: 3% / 5% (권장)
#    - 둔감: 5% / 8%

# ============================================
# 📚 추천 프리셋
# ============================================

# 🔥 초단타 프리셋 (10-30분 변동 포착)
# QUICK_DROP_LOOKBACK = 6
# QUICK_DROP_THRESHOLD = 3.0
# SELL_STAGE_REVIEW = 2
# SELL_STAGE_PREPARE = 4
# SELL_STAGE_IMMEDIATE = 6
# ⚠️ 주의: 알림이 매우 많을 수 있음!

# ⚡ 단타 프리셋 (1-2시간 변동 포착) - 권장
# QUICK_DROP_LOOKBACK = 12
# QUICK_DROP_THRESHOLD = 5.0
# SELL_STAGE_REVIEW = 3
# SELL_STAGE_PREPARE = 5
# SELL_STAGE_IMMEDIATE = 7
# ✅ 균형잡힌 설정, NOM 같은 급락 잡을 수 있음

# 🐢 스윙 프리셋 (3-6시간 변동만)
# QUICK_DROP_LOOKBACK = 18
# QUICK_DROP_THRESHOLD = 8.0
# SELL_STAGE_REVIEW = 4
# SELL_STAGE_PREPARE = 6
# SELL_STAGE_IMMEDIATE = 8
# ✅ 안정적, 알림 적음

# ============================================
# 🎯 실전 시나리오별 설정
# ============================================

# 시나리오 1: "NOM처럼 10분 급락 절대 못 놓친다"
# QUICK_DROP_LOOKBACK = 6      # 1시간만 봄
# QUICK_DROP_THRESHOLD = 4.0   # 4% 급락도 잡음
# MIN_QUICK_DROP = 3.0         # 3% 이상만 분석
# SELL_STAGE_REVIEW = 2        # 2개 지표면 알림
# → 결과: 알림 많지만 급락 놓치지 않음

# 시나리오 2: "거짓 신호 싫어, 확실한 것만"
# QUICK_DROP_LOOKBACK = 18     # 3시간 봄
# QUICK_DROP_THRESHOLD = 8.0   # 8% 급락만 잡음
# MIN_QUICK_DROP = 5.0         # 5% 이상만 분석
# SELL_STAGE_IMMEDIATE = 8     # 8개 지표 필요
# → 결과: 알림 적고 정확도 높음

# 시나리오 3: "균형 잡힌 설정, 실전용" (현재 기본값)
# QUICK_DROP_LOOKBACK = 12     # 2시간
# QUICK_DROP_THRESHOLD = 5.0   # 5% 급락
# SELL_STAGE_REVIEW = 3        # 3/5/7 단계
# → 결과: 적절한 알림, 중요한 신호 놓치지 않음

# ============================================
# ⏰ GitHub Actions 실행 주기 참고
# ============================================

# 현재 설정과 GitHub Actions 주기의 관계:
#
# ✅ 30분마다 실행 (권장)
#    QUICK_DROP_LOOKBACK = 12 (2시간)
#    → 최근 2시간 내 급락을 30분마다 체크
#    → 최대 30분 지연 (실용적)
#
# ✅ 1시간마다 실행 (안전)
#    QUICK_DROP_LOOKBACK = 18 (3시간)
#    → 최근 3시간 내 급락을 1시간마다 체크
#    → 최대 1시간 지연
#
# ❌ 2시간마다 실행 (구버전)
#    QUICK_DROP_LOOKBACK = 36 (6시간)
#    → 단기 급락 놓칠 수 있음

# ============================================
# 🔧 디버깅 및 테스트
# ============================================

# 테스트할 때 임시로 기준을 낮추면 신호가 많이 나옵니다:
# SELL_STAGE_REVIEW = 1  # 1개 지표만 있어도 알림
# MIN_QUICK_DROP = 1.0   # 1% 하락만 있어도 분석

# 실전에서는 다시 원래 값으로 돌려놓으세요!
